---
layout: post
title:  "网络学习笔记3：传输层"
date:   2019-10-15
tags: 网络
color: rgb(255,102,51)
---

> 第二层，传输层。

# 第三章 Transport Layer

这一层很重要，分为TCP和UDP两种。

## 3.1 传输层服务简介

传输层协议提供的一种『逻辑通信`logical communication`』。意思是从上层应用程序看来，不同（主机的）进程之间是直接相连的；应用程序不需要去操心下面的网络通信实现。

注意，传输层协议是在网络终端上执行的，路由器不管。路由器只会检查到网络层协议。

从发送的角度来看，传输层将应用层的消息包转化为传输层的消息包，即『片段`segments`』。这个过程（可能会）将应用层数据包切段，然后分别加上传输层header。然后传到下面的『网络层`network layer`』。

在接收时同理，从网络层获取片段，将其组装后发回给应用层。

### 3.1.1 传输层与网络层的关系

传输层负责在**进程**之间建立逻辑联系，而网络层负责在**主机**之间建立逻辑联系。

> 译者注：书上用了3页来打比喻……

### 3.1.2 总览

在网络领域术语中，我们有时将TCP数据包称为『片段`segments`』，而将UDP数据包称为『报文`datagram`』，我们在本书中统一称为片段。但是要注意，我们还将**网络层**数据包也称为『报文`datagram`』！

我们还要先简单讲一下网络层协议，它只有一个协议『IP协议』，即`Internet Protocol`。它负责在主机之间建立逻辑联系，并提供『尽力投递服务`best-effort delivery service`』，即只尽力而不保证。既不保证传递顺序，也不保证完整性。每个主机至少有一个网络层地址，即IP地址。我们在这里暂时只需要知道一个主机有一个IP地址。

回到传输层协议。这个将『主机-主机』拓展为『端口-端口』的过程称为『传输层多路复用`transport-layer multiplexing`』和『多路分解`demultiplexing`』。TCP/UDP还提供完整性校验。

事实上，UDP只提供两项服务：多路复用(分解)和错误检查。它并不保证传输的可靠性。

TCP提供更多服务，包括：流量控制、顺序编号、确认、计时器，以此保证传输的可靠。还提供『拥塞控制`congestion control`』，这不是针对某项应用的服务，而是在整个网络内生效的机制；简单的说，就是尽量保证所有连接能够享受相同的带宽。

## 3.2 多路复用与分解

(未完待续)
